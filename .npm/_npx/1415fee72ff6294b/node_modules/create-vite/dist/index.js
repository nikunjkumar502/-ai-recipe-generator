import{createRequire as e}from"node:module";import t,{existsSync as n,lstatSync as r,readdirSync as i}from"node:fs";import a,{dirname as o,join as s}from"node:path";import{fileURLToPath as c}from"node:url";import l,{stdin as u,stdout as d}from"node:process";import*as f from"node:readline";import p from"node:readline";import{ReadStream as m}from"node:tty";import{stripVTControlCharacters as h}from"node:util";var g=Object.create,_=Object.defineProperty,v=Object.getOwnPropertyDescriptor,y=Object.getOwnPropertyNames,b=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty,S=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),C=(e,t,n,r)=>{if(t&&typeof t==`object`||typeof t==`function`)for(var i=y(t),a=0,o=i.length,s;a<o;a++)s=i[a],!x.call(e,s)&&s!==n&&_(e,s,{get:(e=>t[e]).bind(null,s),enumerable:!(r=v(t,s))||r.enumerable});return e},w=(e,t,n)=>(n=e==null?{}:g(b(e)),C(t||!e||!e.__esModule?_(n,`default`,{value:e,enumerable:!0}):n,e)),T=e(import.meta.url),ee=S(((e,t)=>{t.exports=a,a.sync=o;var n=T(`fs`);function r(e,t){var n=t.pathExt===void 0?process.env.PATHEXT:t.pathExt;if(!n||(n=n.split(`;`),n.indexOf(``)!==-1))return!0;for(var r=0;r<n.length;r++){var i=n[r].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i)return!0}return!1}function i(e,t,n){return!e.isSymbolicLink()&&!e.isFile()?!1:r(t,n)}function a(e,t,r){n.stat(e,function(n,a){r(n,n?!1:i(a,e,t))})}function o(e,t){return i(n.statSync(e),e,t)}})),E=S(((e,t)=>{t.exports=r,r.sync=i;var n=T(`fs`);function r(e,t,r){n.stat(e,function(e,n){r(e,e?!1:a(n,t))})}function i(e,t){return a(n.statSync(e),t)}function a(e,t){return e.isFile()&&o(e,t)}function o(e,t){var n=e.mode,r=e.uid,i=e.gid,a=t.uid===void 0?process.getuid&&process.getuid():t.uid,o=t.gid===void 0?process.getgid&&process.getgid():t.gid,s=64,c=8,l=1,u=s|c;return n&l||n&c&&i===o||n&s&&r===a||n&u&&a===0}})),te=S(((e,t)=>{T(`fs`);var n=process.platform===`win32`||global.TESTING_WINDOWS?ee():E();t.exports=r,r.sync=i;function r(e,t,i){if(typeof t==`function`&&(i=t,t={}),!i){if(typeof Promise!=`function`)throw TypeError(`callback not provided`);return new Promise(function(n,i){r(e,t||{},function(e,t){e?i(e):n(t)})})}n(e,t||{},function(e,n){e&&(e.code===`EACCES`||t&&t.ignoreErrors)&&(e=null,n=!1),i(e,n)})}function i(e,t){try{return n.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||e.code===`EACCES`)return!1;throw e}}})),ne=S(((e,t)=>{let n=process.platform===`win32`||process.env.OSTYPE===`cygwin`||process.env.OSTYPE===`msys`,r=T(`path`),i=n?`;`:`:`,a=te(),o=e=>Object.assign(Error(`not found: ${e}`),{code:`ENOENT`}),s=(e,t)=>{let r=t.colon||i,a=e.match(/\//)||n&&e.match(/\\/)?[``]:[...n?[process.cwd()]:[],...(t.path||process.env.PATH||``).split(r)],o=n?t.pathExt||process.env.PATHEXT||`.EXE;.CMD;.BAT;.COM`:``,s=n?o.split(r):[``];return n&&e.indexOf(`.`)!==-1&&s[0]!==``&&s.unshift(``),{pathEnv:a,pathExt:s,pathExtExe:o}},c=(e,t,n)=>{typeof t==`function`&&(n=t,t={}),t||={};let{pathEnv:i,pathExt:c,pathExtExe:l}=s(e,t),u=[],d=n=>new Promise((a,s)=>{if(n===i.length)return t.all&&u.length?a(u):s(o(e));let c=i[n],l=/^".*"$/.test(c)?c.slice(1,-1):c,d=r.join(l,e);a(f(!l&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d,n,0))}),f=(e,n,r)=>new Promise((i,o)=>{if(r===c.length)return i(d(n+1));let s=c[r];a(e+s,{pathExt:l},(a,o)=>{if(!a&&o)if(t.all)u.push(e+s);else return i(e+s);return i(f(e,n,r+1))})});return n?d(0).then(e=>n(null,e),n):d(0)};t.exports=c,c.sync=(e,t)=>{t||={};let{pathEnv:n,pathExt:i,pathExtExe:c}=s(e,t),l=[];for(let o=0;o<n.length;o++){let s=n[o],u=/^".*"$/.test(s)?s.slice(1,-1):s,d=r.join(u,e),f=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d;for(let e=0;e<i.length;e++){let n=f+i[e];try{if(a.sync(n,{pathExt:c}))if(t.all)l.push(n);else return n}catch{}}}if(t.all&&l.length)return l;if(t.nothrow)return null;throw o(e)}})),re=S(((e,t)=>{let n=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)===`win32`?Object.keys(t).reverse().find(e=>e.toUpperCase()===`PATH`)||`Path`:`PATH`};t.exports=n,t.exports.default=n})),ie=S(((e,t)=>{let n=T(`path`),r=ne(),i=re();function a(e,t){let a=e.options.env||process.env,o=process.cwd(),s=e.options.cwd!=null,c=s&&process.chdir!==void 0&&!process.chdir.disabled;if(c)try{process.chdir(e.options.cwd)}catch{}let l;try{l=r.sync(e.command,{path:a[i({env:a})],pathExt:t?n.delimiter:void 0})}catch{}finally{c&&process.chdir(o)}return l&&=n.resolve(s?e.options.cwd:``,l),l}function o(e){return a(e)||a(e,!0)}t.exports=o})),ae=S(((e,t)=>{let n=/([()\][%!^"`<>&|;, *?])/g;function r(e){return e=e.replace(n,`^$1`),e}function i(e,t){return e=`${e}`,e=e.replace(/(?=(\\+?)?)\1"/g,`$1$1\\"`),e=e.replace(/(?=(\\+?)?)\1$/,`$1$1`),e=`"${e}"`,e=e.replace(n,`^$1`),t&&(e=e.replace(n,`^$1`)),e}t.exports.command=r,t.exports.argument=i})),oe=S(((e,t)=>{t.exports=/^#!(.*)/})),se=S(((e,t)=>{let n=oe();t.exports=(e=``)=>{let t=e.match(n);if(!t)return null;let[r,i]=t[0].replace(/#! ?/,``).split(` `),a=r.split(`/`).pop();return a===`env`?i:i?`${a} ${i}`:a}})),ce=S(((e,t)=>{let n=T(`fs`),r=se();function i(e){let t=Buffer.alloc(150),i;try{i=n.openSync(e,`r`),n.readSync(i,t,0,150,0),n.closeSync(i)}catch{}return r(t.toString())}t.exports=i})),le=S(((e,t)=>{let n=T(`path`),r=ie(),i=ae(),a=ce(),o=process.platform===`win32`,s=/\.(?:com|exe)$/i,c=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function l(e){e.file=r(e);let t=e.file&&a(e.file);return t?(e.args.unshift(e.file),e.command=t,r(e)):e.file}function u(e){if(!o)return e;let t=l(e),r=!s.test(t);if(e.options.forceShell||r){let r=c.test(t);e.command=n.normalize(e.command),e.command=i.command(e.command),e.args=e.args.map(e=>i.argument(e,r)),e.args=[`/d`,`/s`,`/c`,`"${[e.command].concat(e.args).join(` `)}"`],e.command=process.env.comspec||`cmd.exe`,e.options.windowsVerbatimArguments=!0}return e}function d(e,t,n){t&&!Array.isArray(t)&&(n=t,t=null),t=t?t.slice(0):[],n=Object.assign({},n);let r={command:e,args:t,options:n,file:void 0,original:{command:e,args:t}};return n.shell?r:u(r)}t.exports=d})),ue=S(((e,t)=>{let n=process.platform===`win32`;function r(e,t){return Object.assign(Error(`${t} ${e.command} ENOENT`),{code:`ENOENT`,errno:`ENOENT`,syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function i(e,t){if(!n)return;let r=e.emit;e.emit=function(n,i){if(n===`exit`){let n=a(i,t);if(n)return r.call(e,`error`,n)}return r.apply(e,arguments)}}function a(e,t){return n&&e===1&&!t.file?r(t.original,`spawn`):null}function o(e,t){return n&&e===1&&!t.file?r(t.original,`spawnSync`):null}t.exports={hookChildProcess:i,verifyENOENT:a,verifyENOENTSync:o,notFoundError:r}})),de=S(((e,t)=>{let n=T(`child_process`),r=le(),i=ue();function a(e,t,a){let o=r(e,t,a),s=n.spawn(o.command,o.args,o.options);return i.hookChildProcess(s,o),s}function o(e,t,a){let o=r(e,t,a),s=n.spawnSync(o.command,o.args,o.options);return s.error=s.error||i.verifyENOENTSync(s.status,o),s}t.exports=a,t.exports.spawn=a,t.exports.sync=o,t.exports._parse=r,t.exports._enoent=i})),fe=S(((e,t)=>{function n(e){return e==null?[]:Array.isArray(e)?e:[e]}function r(e,t,n,r){var i,a=e[t],o=~r.string.indexOf(t)?n==null||n===!0?``:String(n):typeof n==`boolean`?n:~r.boolean.indexOf(t)?n===`false`?!1:n===`true`||(e._.push((i=+n,i*0==0?i:n)),!!n):(i=+n,i*0==0?i:n);e[t]=a==null?o:Array.isArray(a)?a.concat(o):[a,o]}t.exports=function(e,t){e||=[],t||={};var i,a,o,s,c,l={_:[]},u=0,d=0,f=0,p=e.length;let m=t.alias!==void 0,h=t.unknown!==void 0,g=t.default!==void 0;if(t.alias=t.alias||{},t.string=n(t.string),t.boolean=n(t.boolean),m)for(i in t.alias)for(a=t.alias[i]=n(t.alias[i]),u=0;u<a.length;u++)(t.alias[a[u]]=a.concat(i)).splice(u,1);for(u=t.boolean.length;u-- >0;)for(a=t.alias[t.boolean[u]]||[],d=a.length;d-- >0;)t.boolean.push(a[d]);for(u=t.string.length;u-- >0;)for(a=t.alias[t.string[u]]||[],d=a.length;d-- >0;)t.string.push(a[d]);if(g){for(i in t.default)if(s=typeof t.default[i],a=t.alias[i]=t.alias[i]||[],t[s]!==void 0)for(t[s].push(i),u=0;u<a.length;u++)t[s].push(a[u])}let _=h?Object.keys(t.alias):[];for(u=0;u<p;u++){if(o=e[u],o===`--`){l._=l._.concat(e.slice(++u));break}for(d=0;d<o.length&&o.charCodeAt(d)===45;d++);if(d===0)l._.push(o);else if(o.substring(d,d+3)===`no-`){if(s=o.substring(d+3),h&&!~_.indexOf(s))return t.unknown(o);l[s]=!1}else{for(f=d+1;f<o.length&&o.charCodeAt(f)!==61;f++);for(s=o.substring(d,f),c=o.substring(++f)||u+1===p||(``+e[u+1]).charCodeAt(0)===45||e[++u],a=d===2?[s]:s,f=0;f<a.length;f++){if(s=a[f],h&&!~_.indexOf(s))return t.unknown(`-`.repeat(d)+s);r(l,s,f+1<a.length||c,t)}}}if(g)for(i in t.default)l[i]===void 0&&(l[i]=t.default[i]);if(m)for(i in l)for(a=t.alias[i]||[];a.length>0;)l[a.shift()]=l[i];return l}})),pe=S(((e,t)=>{let n=process||{},r=n.argv||[],i=n.env||{},a=!(i.NO_COLOR||r.includes(`--no-color`))&&(!!i.FORCE_COLOR||r.includes(`--color`)||n.platform===`win32`||(n.stdout||{}).isTTY&&i.TERM!==`dumb`||!!i.CI),o=(e,t,n=e)=>r=>{let i=``+r,a=i.indexOf(t,e.length);return~a?e+s(i,t,n,a)+t:e+i+t},s=(e,t,n,r)=>{let i=``,a=0;do i+=e.substring(a,r)+n,a=r+t.length,r=e.indexOf(t,a);while(~r);return i+e.substring(a)},c=(e=a)=>{let t=e?o:()=>String;return{isColorSupported:e,reset:t(`\x1B[0m`,`\x1B[0m`),bold:t(`\x1B[1m`,`\x1B[22m`,`\x1B[22m\x1B[1m`),dim:t(`\x1B[2m`,`\x1B[22m`,`\x1B[22m\x1B[2m`),italic:t(`\x1B[3m`,`\x1B[23m`),underline:t(`\x1B[4m`,`\x1B[24m`),inverse:t(`\x1B[7m`,`\x1B[27m`),hidden:t(`\x1B[8m`,`\x1B[28m`),strikethrough:t(`\x1B[9m`,`\x1B[29m`),black:t(`\x1B[30m`,`\x1B[39m`),red:t(`\x1B[31m`,`\x1B[39m`),green:t(`\x1B[32m`,`\x1B[39m`),yellow:t(`\x1B[33m`,`\x1B[39m`),blue:t(`\x1B[34m`,`\x1B[39m`),magenta:t(`\x1B[35m`,`\x1B[39m`),cyan:t(`\x1B[36m`,`\x1B[39m`),white:t(`\x1B[37m`,`\x1B[39m`),gray:t(`\x1B[90m`,`\x1B[39m`),bgBlack:t(`\x1B[40m`,`\x1B[49m`),bgRed:t(`\x1B[41m`,`\x1B[49m`),bgGreen:t(`\x1B[42m`,`\x1B[49m`),bgYellow:t(`\x1B[43m`,`\x1B[49m`),bgBlue:t(`\x1B[44m`,`\x1B[49m`),bgMagenta:t(`\x1B[45m`,`\x1B[49m`),bgCyan:t(`\x1B[46m`,`\x1B[49m`),bgWhite:t(`\x1B[47m`,`\x1B[49m`),blackBright:t(`\x1B[90m`,`\x1B[39m`),redBright:t(`\x1B[91m`,`\x1B[39m`),greenBright:t(`\x1B[92m`,`\x1B[39m`),yellowBright:t(`\x1B[93m`,`\x1B[39m`),blueBright:t(`\x1B[94m`,`\x1B[39m`),magentaBright:t(`\x1B[95m`,`\x1B[39m`),cyanBright:t(`\x1B[96m`,`\x1B[39m`),whiteBright:t(`\x1B[97m`,`\x1B[39m`),bgBlackBright:t(`\x1B[100m`,`\x1B[49m`),bgRedBright:t(`\x1B[101m`,`\x1B[49m`),bgGreenBright:t(`\x1B[102m`,`\x1B[49m`),bgYellowBright:t(`\x1B[103m`,`\x1B[49m`),bgBlueBright:t(`\x1B[104m`,`\x1B[49m`),bgMagentaBright:t(`\x1B[105m`,`\x1B[49m`),bgCyanBright:t(`\x1B[106m`,`\x1B[49m`),bgWhiteBright:t(`\x1B[107m`,`\x1B[49m`)}};t.exports=c(),t.exports.createColors=c})),me=S(((e,t)=>{let n={to(e,t){return t?`[${t+1};${e+1}H`:`[${e+1}G`},move(e,t){let n=``;return e<0?n+=`[${-e}D`:e>0&&(n+=`[${e}C`),t<0?n+=`[${-t}A`:t>0&&(n+=`[${t}B`),n},up:(e=1)=>`[${e}A`,down:(e=1)=>`[${e}B`,forward:(e=1)=>`[${e}C`,backward:(e=1)=>`[${e}D`,nextLine:(e=1)=>`\x1B[E`.repeat(e),prevLine:(e=1)=>`\x1B[F`.repeat(e),left:`\x1B[G`,hide:`\x1B[?25l`,show:`\x1B[?25h`,save:`\x1B7`,restore:`\x1B8`};t.exports={cursor:n,scroll:{up:(e=1)=>`\x1B[S`.repeat(e),down:(e=1)=>`\x1B[T`.repeat(e)},erase:{screen:`\x1B[2J`,up:(e=1)=>`\x1B[1J`.repeat(e),down:(e=1)=>`\x1B[J`.repeat(e),line:`\x1B[2K`,lineEnd:`\x1B[K`,lineStart:`\x1B[1K`,lines(e){let t=``;for(let r=0;r<e;r++)t+=this.line+(r<e-1?n.up():``);return e&&(t+=n.left),t}},beep:`\x07`}})),he=w(fe(),1),ge=w(de(),1),_e=w(pe(),1),D=me();const ve=e=>e===161||e===164||e===167||e===168||e===170||e===173||e===174||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||e===198||e===208||e===215||e===216||e>=222&&e<=225||e===230||e>=232&&e<=234||e===236||e===237||e===240||e===242||e===243||e>=247&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||e===294||e===295||e===299||e>=305&&e<=307||e===312||e>=319&&e<=322||e===324||e>=328&&e<=331||e===333||e===338||e===339||e===358||e===359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||e>=713&&e<=715||e===717||e===720||e>=728&&e<=731||e===733||e===735||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||e===1025||e>=1040&&e<=1103||e===1105||e===8208||e>=8211&&e<=8214||e===8216||e===8217||e===8220||e===8221||e>=8224&&e<=8226||e>=8228&&e<=8231||e===8240||e===8242||e===8243||e===8245||e===8251||e===8254||e===8308||e===8319||e>=8321&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||e===8481||e===8482||e===8486||e===8491||e===8531||e===8532||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||e===8585||e>=8592&&e<=8601||e===8632||e===8633||e===8658||e===8660||e===8679||e===8704||e===8706||e===8707||e===8711||e===8712||e===8715||e===8719||e===8721||e===8725||e===8730||e>=8733&&e<=8736||e===8739||e===8741||e>=8743&&e<=8748||e===8750||e>=8756&&e<=8759||e===8764||e===8765||e===8776||e===8780||e===8786||e===8800||e===8801||e>=8804&&e<=8807||e===8810||e===8811||e===8814||e===8815||e===8834||e===8835||e===8838||e===8839||e===8853||e===8857||e===8869||e===8895||e===8978||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||e===9632||e===9633||e>=9635&&e<=9641||e===9650||e===9651||e===9654||e===9655||e===9660||e===9661||e===9664||e===9665||e>=9670&&e<=9672||e===9675||e>=9678&&e<=9681||e>=9698&&e<=9701||e===9711||e===9733||e===9734||e===9737||e===9742||e===9743||e===9756||e===9758||e===9792||e===9794||e===9824||e===9825||e>=9827&&e<=9829||e>=9831&&e<=9834||e===9836||e===9837||e===9839||e===9886||e===9887||e===9919||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||e===9955||e===9960||e===9961||e>=9963&&e<=9969||e===9972||e>=9974&&e<=9977||e===9979||e===9980||e===9982||e===9983||e===10045||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||e===65533||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||e===127375||e===127376||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109,ye=e=>e===12288||e>=65281&&e<=65376||e>=65504&&e<=65510,be=e=>e>=4352&&e<=4447||e===8986||e===8987||e===9001||e===9002||e>=9193&&e<=9196||e===9200||e===9203||e===9725||e===9726||e===9748||e===9749||e>=9800&&e<=9811||e===9855||e===9875||e===9889||e===9898||e===9899||e===9917||e===9918||e===9924||e===9925||e===9934||e===9940||e===9962||e===9970||e===9971||e===9973||e===9978||e===9981||e===9989||e===9994||e===9995||e===10024||e===10060||e===10062||e>=10067&&e<=10069||e===10071||e>=10133&&e<=10135||e===10160||e===10175||e===11035||e===11036||e===11088||e===11093||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12771||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e===94192||e===94193||e>=94208&&e<=100343||e>=100352&&e<=101589||e>=101632&&e<=101640||e>=110576&&e<=110579||e>=110581&&e<=110587||e===110589||e===110590||e>=110592&&e<=110882||e===110898||e>=110928&&e<=110930||e===110933||e>=110948&&e<=110951||e>=110960&&e<=111355||e===126980||e===127183||e===127374||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||e===127568||e===127569||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||e===127988||e>=127992&&e<=128062||e===128064||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||e===128378||e===128405||e===128406||e===128420||e>=128507&&e<=128591||e>=128640&&e<=128709||e===128716||e>=128720&&e<=128722||e>=128725&&e<=128727||e>=128732&&e<=128735||e===128747||e===128748||e>=128756&&e<=128764||e>=128992&&e<=129003||e===129008||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129672||e>=129680&&e<=129725||e>=129727&&e<=129733||e>=129742&&e<=129755||e>=129760&&e<=129768||e>=129776&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141,xe=/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/y,Se=/[\x00-\x08\x0A-\x1F\x7F-\x9F]{1,1000}/y,O=/\t{1,1000}/y,Ce=/[\u{1F1E6}-\u{1F1FF}]{2}|\u{1F3F4}[\u{E0061}-\u{E007A}]{2}[\u{E0030}-\u{E0039}\u{E0061}-\u{E007A}]{1,3}\u{E007F}|(?:\p{Emoji}\uFE0F\u20E3?|\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation})(?:\u200D(?:\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation}|\p{Emoji}\uFE0F\u20E3?))*/uy,k=/(?:[\x20-\x7E\xA0-\xFF](?!\uFE0F)){1,1000}/y,we=/\p{M}+/gu,Te={limit:1/0,ellipsis:``},Ee=(e,t={},n={})=>{let r=t.limit??1/0,i=t.ellipsis??``,a=t?.ellipsisWidth??(i?Ee(i,Te,n).width:0),o=n.ansiWidth??0,s=n.controlWidth??0,c=n.tabWidth??8,l=n.ambiguousWidth??1,u=n.emojiWidth??2,d=n.fullWidthWidth??2,f=n.regularWidth??1,p=n.wideWidth??2,m=0,h=0,g=e.length,_=0,v=!1,y=g,b=Math.max(0,r-a),x=0,S=0,C=0,w=0;t:for(;;){if(S>x||h>=g&&h>m){let t=e.slice(x,S)||e.slice(m,h);_=0;for(let e of t.replaceAll(we,``)){let t=e.codePointAt(0)||0;if(w=ye(t)?d:be(t)?p:l!==f&&ve(t)?l:f,C+w>b&&(y=Math.min(y,Math.max(x,m)+_)),C+w>r){v=!0;break t}_+=e.length,C+=w}x=S=0}if(h>=g)break;if(k.lastIndex=h,k.test(e)){if(_=k.lastIndex-h,w=_*f,C+w>b&&(y=Math.min(y,h+Math.floor((b-C)/f))),C+w>r){v=!0;break}C+=w,x=m,S=h,h=m=k.lastIndex;continue}if(xe.lastIndex=h,xe.test(e)){if(C+o>b&&(y=Math.min(y,h)),C+o>r){v=!0;break}C+=o,x=m,S=h,h=m=xe.lastIndex;continue}if(Se.lastIndex=h,Se.test(e)){if(_=Se.lastIndex-h,w=_*s,C+w>b&&(y=Math.min(y,h+Math.floor((b-C)/s))),C+w>r){v=!0;break}C+=w,x=m,S=h,h=m=Se.lastIndex;continue}if(O.lastIndex=h,O.test(e)){if(_=O.lastIndex-h,w=_*c,C+w>b&&(y=Math.min(y,h+Math.floor((b-C)/c))),C+w>r){v=!0;break}C+=w,x=m,S=h,h=m=O.lastIndex;continue}if(Ce.lastIndex=h,Ce.test(e)){if(C+u>b&&(y=Math.min(y,h)),C+u>r){v=!0;break}C+=u,x=m,S=h,h=m=Ce.lastIndex;continue}h+=1}return{width:v?b:C,index:v?y:g,truncated:v,ellipsed:v&&r>=a}},De={limit:1/0,ellipsis:``,ellipsisWidth:0},A=(e,t={})=>Ee(e,De,t).width,Oe=`]8;;`,ke=RegExp(`(?:\\[(?<code>\\d+)m|\\${Oe}(?<uri>.*))`,`y`),Ae=e=>{if(e>=30&&e<=37||e>=90&&e<=97)return 39;if(e>=40&&e<=47||e>=100&&e<=107)return 49;if(e===1||e===2)return 22;if(e===3)return 23;if(e===4)return 24;if(e===7)return 27;if(e===8)return 28;if(e===9)return 29;if(e===0)return 0},je=e=>`[${e}m`,Me=e=>`${Oe}${e}`,Ne=e=>e.map(e=>A(e)),Pe=(e,t,n)=>{let r=t[Symbol.iterator](),i=!1,a=!1,o=e.at(-1),s=o===void 0?0:A(o),c=r.next(),l=r.next(),u=0;for(;!c.done;){let o=c.value,d=A(o);s+d<=n?e[e.length-1]+=o:(e.push(o),s=0),(o===`\x1B`||o===`Â›`)&&(i=!0,a=t.startsWith(Oe,u+1)),i?a?o===`\x07`&&(i=!1,a=!1):o===`m`&&(i=!1):(s+=d,s===n&&!l.done&&(e.push(``),s=0)),c=l,l=r.next(),u+=o.length}o=e.at(-1),!s&&o!==void 0&&o.length>0&&e.length>1&&(e[e.length-2]+=e.pop())},Fe=e=>{let t=e.split(` `),n=t.length;for(;n>0&&!(A(t[n-1])>0);)n--;return n===t.length?e:t.slice(0,n).join(` `)+t.slice(n).join(``)},Ie=(e,t,n={})=>{if(n.trim!==!1&&e.trim()===``)return``;let r=``,i,a,o=e.split(` `),s=Ne(o),c=[``];for(let[e,r]of o.entries()){n.trim!==!1&&(c[c.length-1]=(c.at(-1)??``).trimStart());let i=A(c.at(-1)??``);if(e!==0&&(i>=t&&(n.wordWrap===!1||n.trim===!1)&&(c.push(``),i=0),(i>0||n.trim===!1)&&(c[c.length-1]+=` `,i++)),n.hard&&s[e]>t){let n=t-i,a=1+Math.floor((s[e]-n-1)/t);Math.floor((s[e]-1)/t)<a&&c.push(``),Pe(c,r,t);continue}if(i+s[e]>t&&i>0&&s[e]>0){if(n.wordWrap===!1&&i<t){Pe(c,r,t);continue}c.push(``)}if(i+s[e]>t&&n.wordWrap===!1){Pe(c,r,t);continue}c[c.length-1]+=r}n.trim!==!1&&(c=c.map(e=>Fe(e)));let l=c.join(`
`),u=l[Symbol.iterator](),d=u.next(),f=u.next(),p=0;for(;!d.done;){let e=d.value,t=f.value;if(r+=e,e===`\x1B`||e===`Â›`){ke.lastIndex=p+1;let e=ke.exec(l)?.groups;if(e?.code!==void 0){let t=Number.parseFloat(e.code);i=t===39?void 0:t}else e?.uri!==void 0&&(a=e.uri.length===0?void 0:e.uri)}let n=i?Ae(i):void 0;t===`
`?(a&&(r+=Me(``)),i&&n&&(r+=je(n))):e===`
`&&(i&&n&&(r+=je(i)),a&&(r+=Me(a))),p+=e.length,d=f,f=u.next()}return r};function Le(e,t,n){return String(e).normalize().replaceAll(`\r
`,`
`).split(`
`).map(e=>Ie(e,t,n)).join(`
`)}const j={actions:new Set([`up`,`down`,`left`,`right`,`space`,`enter`,`cancel`]),aliases:new Map([[`k`,`up`],[`j`,`down`],[`h`,`left`],[`l`,`right`],[``,`cancel`],[`escape`,`cancel`]]),messages:{cancel:`Canceled`,error:`Something went wrong`},withGuide:!0};function Re(e,t){if(typeof e==`string`)return j.aliases.get(e)===t;for(let n of e)if(n!==void 0&&Re(n,t))return!0;return!1}function ze(e,t){if(e===t)return;let n=e.split(`
`),r=t.split(`
`),i=Math.max(n.length,r.length),a=[];for(let e=0;e<i;e++)n[e]!==r[e]&&a.push(e);return{lines:a,numLinesBefore:n.length,numLinesAfter:r.length,numLines:i}}globalThis.process.platform.startsWith(`win`);const Be=Symbol(`clack:cancel`);function M(e){return e===Be}function Ve(e,t){let n=e;n.isTTY&&n.setRawMode(t)}const He=e=>`columns`in e&&typeof e.columns==`number`?e.columns:80,Ue=e=>`rows`in e&&typeof e.rows==`number`?e.rows:20;function We(e,t,n,r=n){return Le(t,He(e??d)-n.length,{hard:!0,trim:!1}).split(`
`).map((e,t)=>`${t===0?r:n}${e}`).join(`
`)}var Ge=class{input;output;_abortSignal;rl;opts;_render;_track=!1;_prevFrame=``;_subscribers=new Map;_cursor=0;state=`initial`;error=``;value;userInput=``;constructor(e,t=!0){let{input:n=u,output:r=d,render:i,signal:a,...o}=e;this.opts=o,this.onKeypress=this.onKeypress.bind(this),this.close=this.close.bind(this),this.render=this.render.bind(this),this._render=i.bind(this),this._track=t,this._abortSignal=a,this.input=n,this.output=r}unsubscribe(){this._subscribers.clear()}setSubscriber(e,t){let n=this._subscribers.get(e)??[];n.push(t),this._subscribers.set(e,n)}on(e,t){this.setSubscriber(e,{cb:t})}once(e,t){this.setSubscriber(e,{cb:t,once:!0})}emit(e,...t){let n=this._subscribers.get(e)??[],r=[];for(let e of n)e.cb(...t),e.once&&r.push(()=>n.splice(n.indexOf(e),1));for(let e of r)e()}prompt(){return new Promise(e=>{if(this._abortSignal){if(this._abortSignal.aborted)return this.state=`cancel`,this.close(),e(Be);this._abortSignal.addEventListener(`abort`,()=>{this.state=`cancel`,this.close()},{once:!0})}this.rl=p.createInterface({input:this.input,tabSize:2,prompt:``,escapeCodeTimeout:50,terminal:!0}),this.rl.prompt(),this.opts.initialUserInput!==void 0&&this._setUserInput(this.opts.initialUserInput,!0),this.input.on(`keypress`,this.onKeypress),Ve(this.input,!0),this.output.on(`resize`,this.render),this.render(),this.once(`submit`,()=>{this.output.write(D.cursor.show),this.output.off(`resize`,this.render),Ve(this.input,!1),e(this.value)}),this.once(`cancel`,()=>{this.output.write(D.cursor.show),this.output.off(`resize`,this.render),Ve(this.input,!1),e(Be)})})}_isActionKey(e,t){return e===`	`}_setValue(e){this.value=e,this.emit(`value`,this.value)}_setUserInput(e,t){this.userInput=e??``,this.emit(`userInput`,this.userInput),t&&this._track&&this.rl&&(this.rl.write(this.userInput),this._cursor=this.rl.cursor)}_clearUserInput(){this.rl?.write(null,{ctrl:!0,name:`u`}),this._setUserInput(``)}onKeypress(e,t){if(this._track&&t.name!==`return`&&(t.name&&this._isActionKey(e,t)&&this.rl?.write(null,{ctrl:!0,name:`h`}),this._cursor=this.rl?.cursor??0,this._setUserInput(this.rl?.line)),this.state===`error`&&(this.state=`active`),t?.name&&(!this._track&&j.aliases.has(t.name)&&this.emit(`cursor`,j.aliases.get(t.name)),j.actions.has(t.name)&&this.emit(`cursor`,t.name)),e&&(e.toLowerCase()===`y`||e.toLowerCase()===`n`)&&this.emit(`confirm`,e.toLowerCase()===`y`),this.emit(`key`,e?.toLowerCase(),t),t?.name===`return`){if(this.opts.validate){let e=this.opts.validate(this.value);e&&(this.error=e instanceof Error?e.message:e,this.state=`error`,this.rl?.write(this.userInput))}this.state!==`error`&&(this.state=`submit`)}Re([e,t?.name,t?.sequence],`cancel`)&&(this.state=`cancel`),(this.state===`submit`||this.state===`cancel`)&&this.emit(`finalize`),this.render(),(this.state===`submit`||this.state===`cancel`)&&this.close()}close(){this.input.unpipe(),this.input.removeListener(`keypress`,this.onKeypress),this.output.write(`
`),Ve(this.input,!1),this.rl?.close(),this.rl=void 0,this.emit(`${this.state}`,this.value),this.unsubscribe()}restoreCursor(){let e=Le(this._prevFrame,process.stdout.columns,{hard:!0,trim:!1}).split(`
`).length-1;this.output.write(D.cursor.move(-999,e*-1))}render(){let e=Le(this._render(this)??``,process.stdout.columns,{hard:!0,trim:!1});if(e!==this._prevFrame){if(this.state===`initial`)this.output.write(D.cursor.hide);else{let t=ze(this._prevFrame,e),n=Ue(this.output);if(this.restoreCursor(),t){let r=Math.max(0,t.numLinesAfter-n),i=Math.max(0,t.numLinesBefore-n),a=t.lines.find(e=>e>=r);if(a===void 0){this._prevFrame=e;return}if(t.lines.length===1){this.output.write(D.cursor.move(0,a-i)),this.output.write(D.erase.lines(1));let t=e.split(`
`);this.output.write(t[a]),this._prevFrame=e,this.output.write(D.cursor.move(0,t.length-a-1));return}else if(t.lines.length>1){if(r<i)a=r;else{let e=a-i;e>0&&this.output.write(D.cursor.move(0,e))}this.output.write(D.erase.down());let t=e.split(`
`).slice(a);this.output.write(t.join(`
`)),this._prevFrame=e;return}}this.output.write(D.erase.down())}this.output.write(e),this.state===`initial`&&(this.state=`active`),this._prevFrame=e}}};let Ke=class extends Ge{get cursor(){return this.value?0:1}get _value(){return this.cursor===0}constructor(e){super(e,!1),this.value=!!e.initialValue,this.on(`userInput`,()=>{this.value=this._value}),this.on(`confirm`,e=>{this.output.write(D.cursor.move(0,-1)),this.value=e,this.state=`submit`,this.close()}),this.on(`cursor`,()=>{this.value=!this.value})}};function qe(e,t,n){let r=e+t,i=Math.max(n.length-1,0),a=r<0?i:r>i?0:r;return n[a].disabled?qe(a,t<0?-1:1,n):a}var Je=class extends Ge{options;cursor=0;get _selectedValue(){return this.options[this.cursor]}changeValue(){this.value=this._selectedValue.value}constructor(e){super(e,!1),this.options=e.options;let t=this.options.findIndex(({value:t})=>t===e.initialValue),n=t===-1?0:t;this.cursor=this.options[n].disabled?qe(n,1,this.options):n,this.changeValue(),this.on(`cursor`,e=>{switch(e){case`left`:case`up`:this.cursor=qe(this.cursor,-1,this.options);break;case`down`:case`right`:this.cursor=qe(this.cursor,1,this.options);break}this.changeValue()})}},Ye=class extends Ge{get userInputWithCursor(){if(this.state===`submit`)return this.userInput;let e=this.userInput;if(this.cursor>=e.length)return`${this.userInput}\u2588`;let t=e.slice(0,this.cursor),[n,...r]=e.slice(this.cursor);return`${t}${_e.default.inverse(n)}${r.join(``)}`}get cursor(){return this._cursor}constructor(e){super({...e,initialUserInput:e.initialUserInput??e.initialValue}),this.on(`userInput`,e=>{this._setValue(e)}),this.on(`finalize`,()=>{this.value||=e.defaultValue,this.value===void 0&&(this.value=``)})}},N=w(pe(),1);me();function Xe(){return l.platform===`win32`?!!l.env.CI||!!l.env.WT_SESSION||!!l.env.TERMINUS_SUBLIME||l.env.ConEmuTask===`{cmd::Cmder}`||l.env.TERM_PROGRAM===`Terminus-Sublime`||l.env.TERM_PROGRAM===`vscode`||l.env.TERM===`xterm-256color`||l.env.TERM===`alacritty`||l.env.TERMINAL_EMULATOR===`JetBrains-JediTerm`:l.env.TERM!==`linux`}const Ze=Xe(),P=(e,t)=>Ze?e:t,Qe=P(`â—†`,`*`),$e=P(`â– `,`x`),et=P(`â–²`,`x`),tt=P(`â—‡`,`o`),F=P(`â”‚`,`|`),I=P(`â””`,`â€”`),nt=P(`â—`,`>`),L=P(`â—‹`,` `),rt=P(`â—`,`â€¢`),it=P(`â—†`,`*`),at=P(`â–²`,`!`),ot=P(`â– `,`x`),st=e=>{switch(e){case`initial`:case`active`:return N.default.cyan(Qe);case`cancel`:return N.default.red($e);case`error`:return N.default.yellow(et);case`submit`:return N.default.green(tt)}},ct=e=>{switch(e){case`initial`:case`active`:return N.default.cyan(F);case`cancel`:return N.default.red(F);case`error`:return N.default.yellow(F);case`submit`:return N.default.green(F)}},lt=e=>e===161||e===164||e===167||e===168||e===170||e===173||e===174||e>=176&&e<=180||e>=182&&e<=186||e>=188&&e<=191||e===198||e===208||e===215||e===216||e>=222&&e<=225||e===230||e>=232&&e<=234||e===236||e===237||e===240||e===242||e===243||e>=247&&e<=250||e===252||e===254||e===257||e===273||e===275||e===283||e===294||e===295||e===299||e>=305&&e<=307||e===312||e>=319&&e<=322||e===324||e>=328&&e<=331||e===333||e===338||e===339||e===358||e===359||e===363||e===462||e===464||e===466||e===468||e===470||e===472||e===474||e===476||e===593||e===609||e===708||e===711||e>=713&&e<=715||e===717||e===720||e>=728&&e<=731||e===733||e===735||e>=768&&e<=879||e>=913&&e<=929||e>=931&&e<=937||e>=945&&e<=961||e>=963&&e<=969||e===1025||e>=1040&&e<=1103||e===1105||e===8208||e>=8211&&e<=8214||e===8216||e===8217||e===8220||e===8221||e>=8224&&e<=8226||e>=8228&&e<=8231||e===8240||e===8242||e===8243||e===8245||e===8251||e===8254||e===8308||e===8319||e>=8321&&e<=8324||e===8364||e===8451||e===8453||e===8457||e===8467||e===8470||e===8481||e===8482||e===8486||e===8491||e===8531||e===8532||e>=8539&&e<=8542||e>=8544&&e<=8555||e>=8560&&e<=8569||e===8585||e>=8592&&e<=8601||e===8632||e===8633||e===8658||e===8660||e===8679||e===8704||e===8706||e===8707||e===8711||e===8712||e===8715||e===8719||e===8721||e===8725||e===8730||e>=8733&&e<=8736||e===8739||e===8741||e>=8743&&e<=8748||e===8750||e>=8756&&e<=8759||e===8764||e===8765||e===8776||e===8780||e===8786||e===8800||e===8801||e>=8804&&e<=8807||e===8810||e===8811||e===8814||e===8815||e===8834||e===8835||e===8838||e===8839||e===8853||e===8857||e===8869||e===8895||e===8978||e>=9312&&e<=9449||e>=9451&&e<=9547||e>=9552&&e<=9587||e>=9600&&e<=9615||e>=9618&&e<=9621||e===9632||e===9633||e>=9635&&e<=9641||e===9650||e===9651||e===9654||e===9655||e===9660||e===9661||e===9664||e===9665||e>=9670&&e<=9672||e===9675||e>=9678&&e<=9681||e>=9698&&e<=9701||e===9711||e===9733||e===9734||e===9737||e===9742||e===9743||e===9756||e===9758||e===9792||e===9794||e===9824||e===9825||e>=9827&&e<=9829||e>=9831&&e<=9834||e===9836||e===9837||e===9839||e===9886||e===9887||e===9919||e>=9926&&e<=9933||e>=9935&&e<=9939||e>=9941&&e<=9953||e===9955||e===9960||e===9961||e>=9963&&e<=9969||e===9972||e>=9974&&e<=9977||e===9979||e===9980||e===9982||e===9983||e===10045||e>=10102&&e<=10111||e>=11094&&e<=11097||e>=12872&&e<=12879||e>=57344&&e<=63743||e>=65024&&e<=65039||e===65533||e>=127232&&e<=127242||e>=127248&&e<=127277||e>=127280&&e<=127337||e>=127344&&e<=127373||e===127375||e===127376||e>=127387&&e<=127404||e>=917760&&e<=917999||e>=983040&&e<=1048573||e>=1048576&&e<=1114109,ut=e=>e===12288||e>=65281&&e<=65376||e>=65504&&e<=65510,dt=e=>e>=4352&&e<=4447||e===8986||e===8987||e===9001||e===9002||e>=9193&&e<=9196||e===9200||e===9203||e===9725||e===9726||e===9748||e===9749||e>=9800&&e<=9811||e===9855||e===9875||e===9889||e===9898||e===9899||e===9917||e===9918||e===9924||e===9925||e===9934||e===9940||e===9962||e===9970||e===9971||e===9973||e===9978||e===9981||e===9989||e===9994||e===9995||e===10024||e===10060||e===10062||e>=10067&&e<=10069||e===10071||e>=10133&&e<=10135||e===10160||e===10175||e===11035||e===11036||e===11088||e===11093||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12287||e>=12289&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12591||e>=12593&&e<=12686||e>=12688&&e<=12771||e>=12783&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=94176&&e<=94180||e===94192||e===94193||e>=94208&&e<=100343||e>=100352&&e<=101589||e>=101632&&e<=101640||e>=110576&&e<=110579||e>=110581&&e<=110587||e===110589||e===110590||e>=110592&&e<=110882||e===110898||e>=110928&&e<=110930||e===110933||e>=110948&&e<=110951||e>=110960&&e<=111355||e===126980||e===127183||e===127374||e>=127377&&e<=127386||e>=127488&&e<=127490||e>=127504&&e<=127547||e>=127552&&e<=127560||e===127568||e===127569||e>=127584&&e<=127589||e>=127744&&e<=127776||e>=127789&&e<=127797||e>=127799&&e<=127868||e>=127870&&e<=127891||e>=127904&&e<=127946||e>=127951&&e<=127955||e>=127968&&e<=127984||e===127988||e>=127992&&e<=128062||e===128064||e>=128066&&e<=128252||e>=128255&&e<=128317||e>=128331&&e<=128334||e>=128336&&e<=128359||e===128378||e===128405||e===128406||e===128420||e>=128507&&e<=128591||e>=128640&&e<=128709||e===128716||e>=128720&&e<=128722||e>=128725&&e<=128727||e>=128732&&e<=128735||e===128747||e===128748||e>=128756&&e<=128764||e>=128992&&e<=129003||e===129008||e>=129292&&e<=129338||e>=129340&&e<=129349||e>=129351&&e<=129535||e>=129648&&e<=129660||e>=129664&&e<=129672||e>=129680&&e<=129725||e>=129727&&e<=129733||e>=129742&&e<=129755||e>=129760&&e<=129768||e>=129776&&e<=129784||e>=131072&&e<=196605||e>=196608&&e<=262141,ft=/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/y,R=/[\x00-\x08\x0A-\x1F\x7F-\x9F]{1,1000}/y,z=/\t{1,1000}/y,pt=/[\u{1F1E6}-\u{1F1FF}]{2}|\u{1F3F4}[\u{E0061}-\u{E007A}]{2}[\u{E0030}-\u{E0039}\u{E0061}-\u{E007A}]{1,3}\u{E007F}|(?:\p{Emoji}\uFE0F\u20E3?|\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation})(?:\u200D(?:\p{Emoji_Modifier_Base}\p{Emoji_Modifier}?|\p{Emoji_Presentation}|\p{Emoji}\uFE0F\u20E3?))*/uy,B=/(?:[\x20-\x7E\xA0-\xFF](?!\uFE0F)){1,1000}/y,mt=/\p{M}+/gu,ht={limit:1/0,ellipsis:``},gt=(e,t={},n={})=>{let r=t.limit??1/0,i=t.ellipsis??``,a=t?.ellipsisWidth??(i?gt(i,ht,n).width:0),o=n.ansiWidth??0,s=n.controlWidth??0,c=n.tabWidth??8,l=n.ambiguousWidth??1,u=n.emojiWidth??2,d=n.fullWidthWidth??2,f=n.regularWidth??1,p=n.wideWidth??2,m=0,h=0,g=e.length,_=0,v=!1,y=g,b=Math.max(0,r-a),x=0,S=0,C=0,w=0;e:for(;;){if(S>x||h>=g&&h>m){let t=e.slice(x,S)||e.slice(m,h);_=0;for(let e of t.replaceAll(mt,``)){let t=e.codePointAt(0)||0;if(w=ut(t)?d:dt(t)?p:l!==f&&lt(t)?l:f,C+w>b&&(y=Math.min(y,Math.max(x,m)+_)),C+w>r){v=!0;break e}_+=e.length,C+=w}x=S=0}if(h>=g)break;if(B.lastIndex=h,B.test(e)){if(_=B.lastIndex-h,w=_*f,C+w>b&&(y=Math.min(y,h+Math.floor((b-C)/f))),C+w>r){v=!0;break}C+=w,x=m,S=h,h=m=B.lastIndex;continue}if(ft.lastIndex=h,ft.test(e)){if(C+o>b&&(y=Math.min(y,h)),C+o>r){v=!0;break}C+=o,x=m,S=h,h=m=ft.lastIndex;continue}if(R.lastIndex=h,R.test(e)){if(_=R.lastIndex-h,w=_*s,C+w>b&&(y=Math.min(y,h+Math.floor((b-C)/s))),C+w>r){v=!0;break}C+=w,x=m,S=h,h=m=R.lastIndex;continue}if(z.lastIndex=h,z.test(e)){if(_=z.lastIndex-h,w=_*c,C+w>b&&(y=Math.min(y,h+Math.floor((b-C)/c))),C+w>r){v=!0;break}C+=w,x=m,S=h,h=m=z.lastIndex;continue}if(pt.lastIndex=h,pt.test(e)){if(C+u>b&&(y=Math.min(y,h)),C+u>r){v=!0;break}C+=u,x=m,S=h,h=m=pt.lastIndex;continue}h+=1}return{width:v?b:C,index:v?y:g,truncated:v,ellipsed:v&&r>=a}},_t={limit:1/0,ellipsis:``,ellipsisWidth:0},V=(e,t={})=>gt(e,_t,t).width,vt=`]8;;`,yt=RegExp(`(?:\\[(?<code>\\d+)m|\\${vt}(?<uri>.*))`,`y`),bt=e=>{if(e>=30&&e<=37||e>=90&&e<=97)return 39;if(e>=40&&e<=47||e>=100&&e<=107)return 49;if(e===1||e===2)return 22;if(e===3)return 23;if(e===4)return 24;if(e===7)return 27;if(e===8)return 28;if(e===9)return 29;if(e===0)return 0},xt=e=>`[${e}m`,St=e=>`${vt}${e}`,Ct=e=>e.map(e=>V(e)),wt=(e,t,n)=>{let r=t[Symbol.iterator](),i=!1,a=!1,o=e.at(-1),s=o===void 0?0:V(o),c=r.next(),l=r.next(),u=0;for(;!c.done;){let o=c.value,d=V(o);s+d<=n?e[e.length-1]+=o:(e.push(o),s=0),(o===`\x1B`||o===`Â›`)&&(i=!0,a=t.startsWith(vt,u+1)),i?a?o===`\x07`&&(i=!1,a=!1):o===`m`&&(i=!1):(s+=d,s===n&&!l.done&&(e.push(``),s=0)),c=l,l=r.next(),u+=o.length}o=e.at(-1),!s&&o!==void 0&&o.length>0&&e.length>1&&(e[e.length-2]+=e.pop())},Tt=e=>{let t=e.split(` `),n=t.length;for(;n>0&&!(V(t[n-1])>0);)n--;return n===t.length?e:t.slice(0,n).join(` `)+t.slice(n).join(``)},Et=(e,t,n={})=>{if(n.trim!==!1&&e.trim()===``)return``;let r=``,i,a,o=e.split(` `),s=Ct(o),c=[``];for(let[e,r]of o.entries()){n.trim!==!1&&(c[c.length-1]=(c.at(-1)??``).trimStart());let i=V(c.at(-1)??``);if(e!==0&&(i>=t&&(n.wordWrap===!1||n.trim===!1)&&(c.push(``),i=0),(i>0||n.trim===!1)&&(c[c.length-1]+=` `,i++)),n.hard&&s[e]>t){let n=t-i,a=1+Math.floor((s[e]-n-1)/t);Math.floor((s[e]-1)/t)<a&&c.push(``),wt(c,r,t);continue}if(i+s[e]>t&&i>0&&s[e]>0){if(n.wordWrap===!1&&i<t){wt(c,r,t);continue}c.push(``)}if(i+s[e]>t&&n.wordWrap===!1){wt(c,r,t);continue}c[c.length-1]+=r}n.trim!==!1&&(c=c.map(e=>Tt(e)));let l=c.join(`
`),u=l[Symbol.iterator](),d=u.next(),f=u.next(),p=0;for(;!d.done;){let e=d.value,t=f.value;if(r+=e,e===`\x1B`||e===`Â›`){yt.lastIndex=p+1;let e=yt.exec(l)?.groups;if(e?.code!==void 0){let t=Number.parseFloat(e.code);i=t===39?void 0:t}else e?.uri!==void 0&&(a=e.uri.length===0?void 0:e.uri)}let n=i?bt(i):void 0;t===`
`?(a&&(r+=St(``)),i&&n&&(r+=xt(n))):e===`
`&&(i&&n&&(r+=xt(i)),a&&(r+=St(a))),p+=e.length,d=f,f=u.next()}return r};function Dt(e,t,n){return String(e).normalize().replaceAll(`\r
`,`
`).split(`
`).map(e=>Et(e,t,n)).join(`
`)}const Ot=(e,t,n,r,i)=>{let a=t,o=0;for(let t=n;t<r;t++){let n=e[t];if(a-=n.length,o++,a<=i)break}return{lineCount:a,removals:o}},kt=e=>{let{cursor:t,options:n,style:r}=e,i=e.output??process.stdout,a=He(i),o=e.columnPadding??0,s=e.rowPadding??4,c=a-o,l=Ue(i),u=N.default.dim(`...`),d=e.maxItems??1/0,f=Math.max(l-s,0),p=Math.max(Math.min(d,f),5),m=0;t>=p-3&&(m=Math.max(Math.min(t-p+3,n.length-p),0));let h=p<n.length&&m>0,g=p<n.length&&m+p<n.length,_=Math.min(m+p,n.length),v=[],y=0;h&&y++,g&&y++;let b=m+(h?1:0),x=_-(g?1:0);for(let e=b;e<x;e++){let i=Dt(r(n[e],e===t),c,{hard:!0,trim:!1}).split(`
`);v.push(i),y+=i.length}if(y>f){let e=0,n=0,r=y,i=t-b,a=(e,t)=>Ot(v,r,e,t,f);h?({lineCount:r,removals:e}=a(0,i),r>f&&({lineCount:r,removals:n}=a(i+1,v.length))):({lineCount:r,removals:n}=a(i+1,v.length),r>f&&({lineCount:r,removals:e}=a(0,i))),e>0&&(h=!0,v.splice(0,e)),n>0&&(g=!0,v.splice(v.length-n,n))}let S=[];h&&S.push(u);for(let e of v)for(let t of e)S.push(t);return g&&S.push(u),S},At=e=>{let t=e.active??`Yes`,n=e.inactive??`No`;return new Ke({active:t,inactive:n,signal:e.signal,input:e.input,output:e.output,initialValue:e.initialValue??!0,render(){let r=`${N.default.gray(F)}
${st(this.state)}  ${e.message}
`,i=this.value?t:n;switch(this.state){case`submit`:return`${r}${N.default.gray(F)}  ${N.default.dim(i)}`;case`cancel`:return`${r}${N.default.gray(F)}  ${N.default.strikethrough(N.default.dim(i))}
${N.default.gray(F)}`;default:return`${r}${N.default.cyan(F)}  ${this.value?`${N.default.green(nt)} ${t}`:`${N.default.dim(L)} ${N.default.dim(t)}`} ${N.default.dim(`/`)} ${this.value?`${N.default.dim(L)} ${N.default.dim(n)}`:`${N.default.green(nt)} ${n}`}
${N.default.cyan(I)}
`}}}).prompt()},H={message:(e=[],{symbol:t=N.default.gray(F),secondarySymbol:n=N.default.gray(F),output:r=process.stdout,spacing:i=1,withGuide:a}={})=>{let o=[],s=(a??j.withGuide)!==!1,c=s?n:``,l=s?`${t}  `:``,u=s?`${n}  `:``;for(let e=0;e<i;e++)o.push(c);let d=Array.isArray(e)?e:e.split(`
`);if(d.length>0){let[e,...r]=d;e.length>0?o.push(`${l}${e}`):o.push(s?t:``);for(let e of r)e.length>0?o.push(`${u}${e}`):o.push(s?n:``)}r.write(`${o.join(`
`)}
`)},info:(e,t)=>{H.message(e,{...t,symbol:N.default.blue(rt)})},success:(e,t)=>{H.message(e,{...t,symbol:N.default.green(it)})},step:(e,t)=>{H.message(e,{...t,symbol:N.default.green(tt)})},warn:(e,t)=>{H.message(e,{...t,symbol:N.default.yellow(at)})},warning:(e,t)=>{H.warn(e,t)},error:(e,t)=>{H.message(e,{...t,symbol:N.default.red(ot)})}},jt=(e=``,t)=>{(t?.output??process.stdout).write(`${N.default.gray(I)}  ${N.default.red(e)}

`)},Mt=(e=``,t)=>{(t?.output??process.stdout).write(`${N.default.gray(F)}
${N.default.gray(I)}  ${e}

`)};N.default.magenta;const U=(e,t)=>e.includes(`
`)?e.split(`
`).map(e=>t(e)).join(`
`):t(e),W=e=>{let t=(e,t)=>{let n=e.label??String(e.value);switch(t){case`disabled`:return`${N.default.gray(L)} ${U(n,N.default.gray)}${e.hint?` ${N.default.dim(`(${e.hint??`disabled`})`)}`:``}`;case`selected`:return`${U(n,N.default.dim)}`;case`active`:return`${N.default.green(nt)} ${n}${e.hint?` ${N.default.dim(`(${e.hint})`)}`:``}`;case`cancelled`:return`${U(n,e=>N.default.strikethrough(N.default.dim(e)))}`;default:return`${N.default.dim(L)} ${U(n,N.default.dim)}`}};return new Je({options:e.options,signal:e.signal,input:e.input,output:e.output,initialValue:e.initialValue,render(){let n=`${st(this.state)}  `,r=`${ct(this.state)}  `,i=We(e.output,e.message,r,n),a=`${N.default.gray(F)}
${i}
`;switch(this.state){case`submit`:{let n=`${N.default.gray(F)}  `;return`${a}${We(e.output,t(this.options[this.cursor],`selected`),n)}`}case`cancel`:{let n=`${N.default.gray(F)}  `;return`${a}${We(e.output,t(this.options[this.cursor],`cancelled`),n)}
${N.default.gray(F)}`}default:{let n=`${N.default.cyan(F)}  `,r=a.split(`
`).length;return`${a}${n}${kt({output:e.output,cursor:this.cursor,options:this.options,maxItems:e.maxItems,columnPadding:n.length,rowPadding:r+2,style:(e,n)=>t(e,e.disabled?`disabled`:n?`active`:`inactive`)}).join(`
${n}`)}
${N.default.cyan(I)}
`}}}}).prompt()},Nt=`${N.default.gray(F)}  `,G={message:async(e,{symbol:t=N.default.gray(F)}={})=>{process.stdout.write(`${N.default.gray(F)}
${t}  `);let n=3;for await(let t of e){t=t.replace(/\n/g,`
${Nt}`),t.includes(`
`)&&(n=3+h(t.slice(t.lastIndexOf(`
`))).length);let e=h(t).length;n+e<process.stdout.columns?(n+=e,process.stdout.write(t)):(process.stdout.write(`
${Nt}${t.trimStart()}`),n=3+h(t.trimStart()).length)}process.stdout.write(`
`)},info:e=>G.message(e,{symbol:N.default.blue(rt)}),success:e=>G.message(e,{symbol:N.default.green(it)}),step:e=>G.message(e,{symbol:N.default.green(tt)}),warn:e=>G.message(e,{symbol:N.default.yellow(at)}),warning:e=>G.warn(e),error:e=>G.message(e,{symbol:N.default.red(ot)})},Pt=e=>new Ye({validate:e.validate,placeholder:e.placeholder,defaultValue:e.defaultValue,initialValue:e.initialValue,output:e.output,signal:e.signal,input:e.input,render(){let t=(e?.withGuide??j.withGuide)!==!1,n=`${`${t?`${N.default.gray(F)}
`:``}${st(this.state)}  `}${e.message}
`,r=e.placeholder?N.default.inverse(e.placeholder[0])+N.default.dim(e.placeholder.slice(1)):N.default.inverse(N.default.hidden(`_`)),i=this.userInput?this.userInputWithCursor:r,a=this.value??``;switch(this.state){case`error`:{let e=this.error?`  ${N.default.yellow(this.error)}`:``,r=t?`${N.default.yellow(F)}  `:``,a=t?N.default.yellow(I):``;return`${n.trim()}
${r}${i}
${a}${e}
`}case`submit`:{let e=a?`  ${N.default.dim(a)}`:``;return`${n}${t?N.default.gray(F):``}${e}`}case`cancel`:{let e=a?`  ${N.default.strikethrough(N.default.dim(a))}`:``,r=t?N.default.gray(F):``;return`${n}${r}${e}${a.trim()?`
${r}`:``}`}default:return`${n}${t?`${N.default.cyan(F)}  `:``}${i}
${t?N.default.cyan(I):``}
`}}}).prompt();var Ft=S(((e,t)=>{var n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,o=(e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})},s=(e,t,o,s)=>{if(t&&typeof t==`object`||typeof t==`function`)for(let c of i(t))!a.call(e,c)&&c!==o&&n(e,c,{get:()=>t[c],enumerable:!(s=r(t,c))||s.enumerable});return e},c=e=>s(n({},`__esModule`,{value:!0}),e),l={};o(l,{KNOWN_AGENTS:()=>y,determineAgent:()=>b}),t.exports=c(l);var u=T(`node:fs/promises`),d=T(`node:fs`);let f=`cursor`,p=`cursor-cli`,m=`claude`,h=`devin`,g=`replit`,_=`gemini`,v=`codex`,y={CURSOR:f,CURSOR_CLI:p,CLAUDE:m,DEVIN:h,REPLIT:g,GEMINI:_,CODEX:v};async function b(){if(process.env.AI_AGENT){let e=process.env.AI_AGENT.trim();if(e)return{isAgent:!0,agent:{name:e}}}if(process.env.CURSOR_TRACE_ID)return{isAgent:!0,agent:{name:f}};if(process.env.CURSOR_AGENT)return{isAgent:!0,agent:{name:p}};if(process.env.GEMINI_CLI)return{isAgent:!0,agent:{name:_}};if(process.env.CODEX_SANDBOX)return{isAgent:!0,agent:{name:v}};if(process.env.CLAUDECODE||process.env.CLAUDE_CODE)return{isAgent:!0,agent:{name:m}};if(process.env.REPL_ID)return{isAgent:!0,agent:{name:g}};try{return await(0,u.access)(`/opt/.devin`,d.constants.F_OK),{isAgent:!0,agent:{name:h}}}catch{}return{isAgent:!1,agent:void 0}}})),It=w(pe(),1),Lt=Ft();const{blue:K,blueBright:q,cyan:J,green:Rt,greenBright:zt,magenta:Y,red:X,redBright:Bt,reset:Vt,underline:Ht,yellow:Z}=It.default,Q=(0,he.default)(process.argv.slice(2),{boolean:[`help`,`overwrite`,`immediate`,`rolldown`,`interactive`],alias:{h:`help`,t:`template`,i:`immediate`},string:[`template`]}),Ut=process.cwd(),Wt=`\
Usage: create-vite [OPTION]... [DIRECTORY]

Create a new Vite project in JavaScript or TypeScript.
When running in TTY, the CLI will start in interactive mode.

Options:
  -t, --template NAME                   use a specific template
  -i, --immediate                       install dependencies and start dev
  --rolldown / --no-rolldown            use / do not use rolldown-vite (Experimental)
  --interactive / --no-interactive      force interactive / non-interactive mode

Available templates:
${Z(`vanilla-ts          vanilla`)}
${Rt(`vue-ts              vue`)}
${J(`react-ts            react`)}
${J(`react-compiler-ts   react-compiler`)}
${J(`react-swc-ts        react-swc`)}
${Y(`preact-ts           preact`)}
${Bt(`lit-ts              lit`)}
${X(`svelte-ts           svelte`)}
${K(`solid-ts            solid`)}
${q(`qwik-ts             qwik`)}`,Gt=[{name:`vanilla`,display:`Vanilla`,color:Z,variants:[{name:`vanilla-ts`,display:`TypeScript`,color:K},{name:`vanilla`,display:`JavaScript`,color:Z}]},{name:`vue`,display:`Vue`,color:Rt,variants:[{name:`vue-ts`,display:`TypeScript`,color:K},{name:`vue`,display:`JavaScript`,color:Z},{name:`custom-create-vue`,display:`Official Vue Starter â†—`,color:Rt,customCommand:`npm create vue@latest TARGET_DIR`},{name:`custom-nuxt`,display:`Nuxt â†—`,link:`https://nuxt.com`,color:zt,customCommand:`npm exec nuxi init TARGET_DIR`},{name:`custom-vike-vue`,display:`Vike â†—`,link:`https://vike.dev`,color:zt,customCommand:`npm create -- vike@latest --vue TARGET_DIR`}]},{name:`react`,display:`React`,color:J,variants:[{name:`react-ts`,display:`TypeScript`,color:K},{name:`react-compiler-ts`,display:`TypeScript + React Compiler`,color:K},{name:`react-swc-ts`,display:`TypeScript + SWC`,color:K},{name:`react`,display:`JavaScript`,color:Z},{name:`react-compiler`,display:`JavaScript + React Compiler`,color:Z},{name:`react-swc`,display:`JavaScript + SWC`,color:Z},{name:`rsc`,display:`RSC`,color:Y,customCommand:`npm exec tiged vitejs/vite-plugin-react/packages/plugin-rsc/examples/starter TARGET_DIR`},{name:`custom-react-router`,display:`React Router v7 â†—`,link:`https://reactrouter.com`,color:J,customCommand:`npm create react-router@latest TARGET_DIR`},{name:`custom-tanstack-router-react`,display:`TanStack Router â†—`,link:`https://tanstack.com/router`,color:J,customCommand:`npm exec @tanstack/cli@latest -- create TARGET_DIR --template file-router --interactive`},{name:`redwoodsdk-standard`,display:`RedwoodSDK â†—`,link:`https://rwsdk.com`,color:J,customCommand:`npm create rwsdk@latest TARGET_DIR`},{name:`custom-vike-react`,display:`Vike â†—`,link:`https://vike.dev`,color:J,customCommand:`npm create -- vike@latest --react TARGET_DIR`}]},{name:`preact`,display:`Preact`,color:Y,variants:[{name:`preact-ts`,display:`TypeScript`,color:K},{name:`preact`,display:`JavaScript`,color:Z},{name:`custom-create-preact`,display:`Official Preact Starter â†—`,color:Y,customCommand:`npm create preact@latest TARGET_DIR`}]},{name:`lit`,display:`Lit`,color:Bt,variants:[{name:`lit-ts`,display:`TypeScript`,color:K},{name:`lit`,display:`JavaScript`,color:Z}]},{name:`svelte`,display:`Svelte`,color:X,variants:[{name:`svelte-ts`,display:`TypeScript`,color:K},{name:`svelte`,display:`JavaScript`,color:Z},{name:`custom-svelte-kit`,display:`SvelteKit â†—`,color:X,customCommand:`npm exec sv create TARGET_DIR`}]},{name:`solid`,display:`Solid`,color:K,variants:[{name:`solid-ts`,display:`TypeScript`,color:K},{name:`solid`,display:`JavaScript`,color:Z},{name:`custom-tanstack-router-solid`,display:`TanStack Router â†—`,link:`https://tanstack.com/router`,color:J,customCommand:`npm exec @tanstack/cli@latest -- create TARGET_DIR --template file-router --framework solid --interactive`},{name:`custom-vike-solid`,display:`Vike â†—`,link:`https://vike.dev`,color:J,customCommand:`npm create -- vike@latest --solid TARGET_DIR`}]},{name:`ember`,display:`Ember`,color:Bt,variants:[{name:`ember-app-ts`,display:`TypeScript â†—`,color:q,customCommand:`npm exec -- ember-cli@latest new TARGET_DIR --typescript`},{name:`ember-app`,display:`JavaScript â†—`,color:Bt,customCommand:`npm exec -- ember-cli@latest new TARGET_DIR`}]},{name:`qwik`,display:`Qwik`,color:q,variants:[{name:`qwik-ts`,display:`TypeScript`,color:q},{name:`qwik`,display:`JavaScript`,color:Z},{name:`custom-qwik-city`,display:`QwikCity â†—`,color:q,customCommand:`npm create qwik@latest empty TARGET_DIR`}]},{name:`angular`,display:`Angular`,color:X,variants:[{name:`custom-angular`,display:`Angular â†—`,color:X,customCommand:`npm exec @angular/cli@latest new TARGET_DIR`},{name:`custom-analog`,display:`Analog â†—`,color:Z,customCommand:`npm create analog@latest TARGET_DIR`}]},{name:`marko`,display:`Marko`,color:Y,variants:[{name:`marko-run`,display:`Marko Run â†—`,color:Y,customCommand:`npm create -- marko@latest --name TARGET_DIR`}]},{name:`others`,display:`Others`,color:Vt,variants:[{name:`create-vite-extra`,display:`Extra Vite Starters â†—`,color:Vt,customCommand:`npm create vite-extra@latest TARGET_DIR`},{name:`create-electron-vite`,display:`Electron â†—`,color:Vt,customCommand:`npm create electron-vite@latest TARGET_DIR`}]}],Kt=Gt.map(e=>e.variants.map(e=>e.name)).reduce((e,t)=>e.concat(t),[]),qt={_gitignore:`.gitignore`},Jt=`vite-project`;function Yt([e,...t],n){let{status:r,error:i}=ge.default.sync(e,t,n);r!=null&&r>0&&process.exit(r),i&&(console.error(`\n${e} ${t.join(` `)} error!`),console.error(i),process.exit(1))}function Xt(e,t){if(process.env._VITE_TEST_CLI){H.step(`Installing dependencies with ${t}... (skipped in test)`);return}H.step(`Installing dependencies with ${t}...`),Yt(pn(t),{stdio:`inherit`,cwd:e})}function Zt(e,t){if(process.env._VITE_TEST_CLI){H.step(`Starting dev server... (skipped in test)`);return}H.step(`Starting dev server...`),Yt(mn(t,`dev`),{stdio:`inherit`,cwd:e})}async function Qt(){let e=Q._[0]?$t(String(Q._[0])):void 0,n=Q.template,r=Q.overwrite,i=Q.immediate,o=Q.rolldown,s=Q.interactive;if(Q.help){console.log(Wt);return}let l=s??process.stdin.isTTY,{isAgent:u}=await(0,Lt.determineAgent)();u&&l&&console.log(`
To create in one go, run: create-vite <DIRECTORY> --no-interactive --template <TEMPLATE>
`);let d=sn(process.env.npm_config_user_agent),f=()=>jt(`Operation cancelled`),p=e;if(!p)if(l){let e=await Pt({message:`Project name:`,defaultValue:Jt,placeholder:Jt,validate:e=>!e||$t(e).length>0?void 0:`Invalid project name`});if(M(e))return f();p=$t(e)}else p=Jt;if(t.existsSync(p)&&!an(p)){let e=r?`yes`:void 0;if(!e)if(l){let t=await W({message:(p===`.`?`Current directory`:`Target directory "${p}"`)+` is not empty. Please choose how to proceed:`,options:[{label:`Cancel operation`,value:`no`},{label:`Remove existing files and continue`,value:`yes`},{label:`Ignore files and continue`,value:`ignore`}]});if(M(t))return f();e=t}else e=`no`;switch(e){case`yes`:on(p);break;case`no`:f();return}}let m=a.basename(a.resolve(p));if(!tn(m))if(l){let e=await Pt({message:`Package name:`,defaultValue:nn(m),placeholder:nn(m),validate(e){if(e&&!tn(e))return`Invalid package.json name`}});if(M(e))return f();m=e}else m=nn(m);let h=n,g=!1;if(n&&!Kt.includes(n)&&(h=void 0,g=!0),!h)if(l){let e=await W({message:g?`"${n}" isn't a valid template. Please choose from below: `:`Select a framework:`,options:Gt.map(e=>{let t=e.color;return{label:t(e.display||e.name),value:e}})});if(M(e))return f();let t=await W({message:`Select a variant:`,options:e.variants.map(e=>{let t=e.customCommand?dn(e.customCommand,d).replace(/ TARGET_DIR$/,``):void 0;return{label:fn(e),value:e.name,hint:t}})});if(M(t))return f();h=t}else h=`vanilla-ts`;let _=o;if(_===void 0)if(l){let e=await W({message:`Use Vite 8 beta (Experimental)?:`,options:[{label:`Yes`,value:!0,hint:`The future default Vite, which is powered by Rolldown`},{label:`No`,value:!1}],initialValue:!1});if(M(e))return f();_=e}else _=!1;let v=d?d.name:`npm`,y=a.join(Ut,p),b=!1;h.includes(`-swc`)&&(b=!0,h=h.replace(`-swc`,``));let x=!1;h.includes(`react-compiler`)&&(x=!0,h=h.replace(`-compiler`,``));let{customCommand:S}=Gt.flatMap(e=>e.variants).find(e=>e.name===h)??{};if(S){let[e,...t]=dn(S,d).split(` `),n=t.map(e=>e.replace(`TARGET_DIR`,()=>p)),{status:r}=ge.default.sync(e,n,{stdio:`inherit`});process.exit(r??0)}let C=i;if(C===void 0)if(l){let e=await At({message:`Install with ${v} and start now?`});if(M(e))return f();C=e}else C=!1;t.mkdirSync(y,{recursive:!0}),H.step(`Scaffolding project in ${y}...`);let w=a.resolve(c(import.meta.url),`../..`,`template-${h}`),T=(e,n)=>{let r=a.join(y,qt[e]??e);if(n)t.writeFileSync(r,n);else if(e===`index.html`){let n=a.join(w,e),i=t.readFileSync(n,`utf-8`).replace(/<title>.*?<\/title>/,`<title>${m}</title>`);t.writeFileSync(r,i)}else en(a.join(w,e),r)},ee=t.readdirSync(w);for(let e of ee.filter(e=>e!==`package.json`))T(e);let E=JSON.parse(t.readFileSync(a.join(w,`package.json`),`utf-8`));if(E.name=m,_){let e=`^8.0.0-beta.13`;switch(E.devDependencies.vite=e,v){case`pnpm`:E.pnpm??={},E.pnpm.overrides??={},E.pnpm.overrides.vite=e;break;case`yarn`:E.resolutions??={},E.resolutions.vite=e;break;default:E.overrides??={},E.overrides.vite=e}}if(T(`package.json`,JSON.stringify(E,null,2)+`
`),b?cn(y,h.endsWith(`-ts`)):x&&ln(y,h.endsWith(`-ts`)),C)Xt(y,v),Zt(y,v);else{let e=``,t=a.relative(Ut,y);e+=`Done. Now run:
`,y!==Ut&&(e+=`\n  cd ${t.includes(` `)?`"${t}"`:t}`),e+=`\n  ${pn(v).join(` `)}`,e+=`\n  ${mn(v,`dev`).join(` `)}`,Mt(e)}}function $t(e){return e.trim().replace(/\/+$/g,``)}function en(e,n){t.statSync(e).isDirectory()?rn(e,n):t.copyFileSync(e,n)}function tn(e){return/^(?:@[a-z\d\-*~][a-z\d\-*._~]*\/)?[a-z\d\-~][a-z\d\-._~]*$/.test(e)}function nn(e){return e.trim().toLowerCase().replace(/\s+/g,`-`).replace(/^[._]/,``).replace(/[^a-z\d\-~]+/g,`-`)}function rn(e,n){t.mkdirSync(n,{recursive:!0});for(let r of t.readdirSync(e))en(a.resolve(e,r),a.resolve(n,r))}function an(e){let n=t.readdirSync(e);return n.length===0||n.length===1&&n[0]===`.git`}function on(e){if(t.existsSync(e))for(let n of t.readdirSync(e))n!==`.git`&&t.rmSync(a.resolve(e,n),{recursive:!0,force:!0})}function sn(e){if(!e)return;let t=e.split(` `)[0].split(`/`);return{name:t[0],version:t[1]}}function cn(e,t){$(a.resolve(e,`package.json`),e=>e.replace(/"@vitejs\/plugin-react": ".+?"/,`"@vitejs/plugin-react-swc": "^4.2.2"`)),$(a.resolve(e,`vite.config.${t?`ts`:`js`}`),e=>e.replace(`@vitejs/plugin-react`,`@vitejs/plugin-react-swc`)),un(e,`The React Compiler is currently not compatible with SWC. See [this issue](https://github.com/vitejs/vite-plugin-react/issues/428) for tracking the progress.`)}function ln(e,t){$(a.resolve(e,`package.json`),e=>{let t=JSON.parse(e),n=Object.entries(t.devDependencies);return n.push([`babel-plugin-react-compiler`,`^1.0.0`]),n.sort(),t.devDependencies=Object.fromEntries(n),JSON.stringify(t,null,2)+`
`}),$(a.resolve(e,`vite.config.${t?`ts`:`js`}`),e=>e.replace(`  plugins: [react()],`,`  plugins: [
    react({
      babel: {
        plugins: [['babel-plugin-react-compiler']],
      },
    }),
  ],`)),un(e,`The React Compiler is enabled on this template. See [this documentation](https://react.dev/learn/react-compiler) for more information.

Note: This will impact Vite dev & build performances.`)}function un(e,t){$(a.resolve(e,`README.md`),e=>{let n=e.indexOf(`## React Compiler`),r=e.indexOf(`

`,n),i=e.indexOf(`
## `,r);return n===-1||r===-1||i===-1?(console.warn(`Could not update compiler section in README.md`),e):e.replace(e.slice(r+2,i-1),t)})}function $(e,n){let r=t.readFileSync(e,`utf-8`);t.writeFileSync(e,n(r),`utf-8`)}function dn(e,t){let n=t?t.name:`npm`,r=n===`yarn`&&t?.version.startsWith(`1.`);return e.replace(/^npm create (?:-- )?/,()=>n===`bun`?`bun x create-`:n===`deno`?`deno run -A npm:create-`:n===`pnpm`?`pnpm create `:e.startsWith(`npm create -- `)?`${n} create -- `:`${n} create `).replace(`@latest`,()=>r?``:`@latest`).replace(/^npm exec /,()=>n===`pnpm`?`pnpm dlx `:n===`yarn`&&!r?`yarn dlx `:n===`bun`?`bun x `:n===`deno`?`deno run -A npm:`:`npm exec `)}function fn(e){let t=e.display||e.name,n=e.color(t),{link:r}=e;return r&&(n+=` ${Ht(r)}`),n}function pn(e){return e===`yarn`?[e]:[e,`install`]}function mn(e,t){switch(e){case`yarn`:case`pnpm`:case`bun`:return[e,t];case`deno`:return[e,`task`,t];default:return[e,`run`,t]}}Qt().catch(e=>{console.error(e)});export{};